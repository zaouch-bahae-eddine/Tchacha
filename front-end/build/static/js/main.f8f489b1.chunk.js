(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{78:function(e,n,t){"use strict";t.r(n);var a,r,i=t(15),c=t(3),o=t(51),s=t.n(o),l=t(17),d=t(11),b=t(23),u=t.n(b),j=t(28),h=t(7),p=t(94),m=t(4),x=t(89),g=Object(x.a)(a||(a=Object(m.a)(["\n    mutation LoginMutation($loginEmail: String!, $loginPassword: String!) {\n        login(email: $loginEmail, password: $loginPassword) {\n            ...on Error{\n                __typename\n                msg\n                status\n            }\n            ...on Token{\n                __typename\n                jwt\n                msg\n                status\n            }\n        }\n    }\n"]))),f=Object(x.a)(r||(r=Object(m.a)(["\n    mutation RegisterMutation($registerUser: UserInput!) {\n        register(user: $registerUser) {\n            ...on Error{\n                msg\n                status\n                __typename\n            }\n            ...on Token{\n                jwt\n                msg\n                status\n                __typename\n            }\n        }\n    }\n"]))),O=t(1),v=Object(c.createContext)();function w(e){var n=e.children,t=I();return Object(O.jsx)(v.Provider,{value:t,children:n})}function C(){return Object(c.useContext)(v)}var y,M,k,I=function(){var e=Object(c.useState)(null),n=Object(h.a)(e,2),t=n[0],a=n[1];Object(c.useEffect)((function(){if(""!=localStorage.getItem("token")&&void 0!=localStorage.getItem("token")){var e=localStorage.getItem("token").split(".")[1];a(JSON.parse(atob(e)))}}),[]);var r=Object(p.a)(g,{onCompleted:function(e){200===e.login.status&&(localStorage.setItem("token",e.login.jwt),a(JSON.parse(atob(e.login.jwt.split(".")[1]))))}}),i=Object(h.a)(r,2),o=i[0],s=(i[1].data,Object(p.a)(f,{onCompleted:function(e){e.register.status>=200&&e.register.status<300&&(localStorage.setItem("token",e.register.jwt),a(JSON.parse(atob(e.register.jwt.split(".")[1]))))}})),l=Object(h.a)(s,1)[0];return{user:t,login:function(){var e=Object(j.a)(u.a.mark((function e(n,t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{loginEmail:n,loginPassword:t}});case 2:return a=e.sent,e.abrupt("return",a.data.login);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),logout:function(){localStorage.setItem("token",""),a(null)},register:function(){var e=Object(j.a)(u.a.mark((function e(n){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{registerUser:{name:n.userName,email:n.email,password:n.password}}});case 3:return t=e.sent,console.log(t),e.abrupt("return",t.data.register);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()}},S=t(6),N=S.a.div(y||(y=Object(m.a)(["\n\n    align-items: center;\n    width: 320px;\n    background-color: #eceefd;\n    border-radius: 10px;\n    margin: 17px auto;\n    & > div{\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 15px 20px;\n    }\n\n"]))),$=S.a.div(M||(M=Object(m.a)(["\n    font-size: 16pt;\n    color: #4452a6;\n"]))),F=S.a.button(k||(k=Object(m.a)(["\n    background-color: #ff000091;\n    border: none;\n    width: 90px;\n    height: 40px;\n    border-radius: 7px;\n    color: white;\n    cursor: pointer;\n"])));var z,E,T,_=function(){var e=C();return Object(O.jsx)(c.Fragment,{children:null!=e.user?Object(O.jsx)(N,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)($,{children:e.user.name}),Object(O.jsx)(F,{onClick:function(){return e.logout()},children:"D\xe9connecter"})]})}):""})},D=t(92),A=t(13),B=S.a.div(z||(z=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 320px;\n    background-color: #eceefd;\n    border-radius: 10px;\n    margin: 17px auto;\n"]))),L=S.a.div(E||(E=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 90%;\n\n    background-color: #eceefd;\n    svg {\n        color: #4452a6;\n        font-size: 16pt;\n        &:hover{\n            cursor: pointer;\n        }\n    }\n    div{\n        position: relative;\n    }\n"]))),R=S.a.div(T||(T=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    max-width: 280px;\n    height: 50px;\n    margin-bottom: 17px;\n    background-color: #d9defa;\n    border-radius: 10px;\n    color: #4452a6;\n    svg{\n        margin: 0 12px;\n        font-size: 16pt;\n    }\n    &:hover{\n        cursor: pointer;\n    }\n"])));var U,P,q,J,Q,G,H,K,V,W=function(e){return Object(O.jsxs)(B,{children:[Object(O.jsxs)(L,{children:[Object(O.jsxs)("h2",{children:[e.colomunTitle," Channels"]}),Object(O.jsx)("div",{onClick:function(){return e.dispalayChannelModal()},children:Object(O.jsx)(A.a,{})})]}),e.children,Object(O.jsxs)(R,{onClick:function(){return e.dispalayChannelModal()},children:[" ",Object(O.jsx)(A.a,{})," ",Object(O.jsx)("span",{children:"Add a channel"})]})]})},X=t(57),Y=Object(x.a)(U||(U=Object(m.a)(["\n    query Query {\n        channels: getChannels {\n            id\n            name\n        }\n    }\n"]))),Z=Object(x.a)(P||(P=Object(m.a)(["\n    mutation CreateChannelMutation($createChannelName: String!) {\n        createChannel(name: $createChannelName) {\n            id\n            name\n        }\n    }\n"]))),ee=Object(x.a)(q||(q=Object(m.a)(["\n    mutation SetChannelNameMutation($setChannelNameId: ID!, $setChannelNameName: String!) {\n        setChannelName(id: $setChannelNameId, name: $setChannelNameName) {\n            id\n            name\n        }\n    }\n"]))),ne=Object(x.a)(J||(J=Object(m.a)(["\n    mutation DeleteChannelMutation($deleteChannelId: ID!) {\n        deleteChannel(id: $deleteChannelId) {\n            id\n            name\n        }\n    }\n"]))),te=Object(x.a)(Q||(Q=Object(m.a)(["\n    query Query($getMembersChannel: ID!) {\n        members: getMembers(channel: $getMembersChannel) {\n            id\n            email\n            name\n            __typename\n        }\n    }\n"]))),ae=Object(x.a)(G||(G=Object(m.a)(["\n    mutation AddMemberToChannelMutation($addMemberToChannelEmail: String!, $addMemberToChannelChannel: ID!) {\n        addMemberToChannel(email: $addMemberToChannelEmail, channel: $addMemberToChannelChannel) {\n            id\n            email\n            name\n            __typename\n        }\n    }\n"]))),re=Object(x.a)(H||(H=Object(m.a)(["\n    mutation RmMemberFromChannelMutation($rmMemberFromChannelEmail: String!, $rmMemberFromChannelChannel: ID!) {\n        rmMemberFromChannel(email: $rmMemberFromChannelEmail, channel: $rmMemberFromChannelChannel) {\n            id\n            name\n            email\n            __typename\n        }\n    }\n"]))),ie=Object(x.a)(K||(K=Object(m.a)(["\n    query Query($getChaneByIdChannelId: ID!) {\n        channel: getChaneById(channelId: $getChaneByIdChannelId) {\n            id\n            name\n            __typename\n        }\n    }\n"]))),ce=S.a.div(V||(V=Object(m.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 8;\n    background-color: ",";\n    display: ",";\n"])),(function(e){return e.color?e.color:"#fff0"}),(function(e){return e.visible?"block":"none"}));var oe,se,le,de,be,ue,je=function(e){return Object(O.jsx)(ce,{visible:e.visible,onClick:function(){return e.clickAction()},color:e.color})},he=S.a.ul(oe||(oe=Object(m.a)(["\n    display: ",";\n    z-index: 9;\n    position: absolute;\n    top: -19px;\n    right: -5px;\n    background-color: #ffffffc9;\n    border-radius: 5px;\n    box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n    list-style: none;\n    padding:0;\n    width: ",";\n    li {\n        font-size: 0.9em;\n        color: ",";\n        display: flex;\n        align-items: center;\n        padding: 7px;\n        border-radius: 5px;\n        transition: 0.1s;\n        svg{\n            margin-right: 12px;\n        }\n        &:hover{\n            cursor: pointer;\n            background-color: ",";\n            transition: 0.3s;\n            color: white;\n            svg{\n                color: white;\n            }\n        }\n    }\n"])),(function(e){return e.visible?"block":"none"}),(function(e){return e.size?e.size:"150px"}),(function(e){return e.color}),(function(e){return e.color})),pe=S.a.div(se||(se=Object(m.a)(["\n    width: 280px;\n    border-radius: 10px;\n    background-color: white;\n    margin-bottom: 11px;\n    box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n    & > div{\n        padding: 12px;\n        & > span{\n            font-size: 0.7em;\n            color: white;\n            background: #ff32325e;\n            padding: 3px;\n            border-radius: 3px;\n        }\n        & > p {\n            padding: 5px;\n        }\n    }\n    h2{\n        margin-bottom: 0;\n    }\n\n"]))),me=Object(S.a)(l.b)(le||(le=Object(m.a)(["\n    text-decoration: inherit;\n    color: inherit;\n    display: inherit;\n    justify-content: inherit;\n    align-items: inherit;\n"]))),xe=S.a.div(de||(de=Object(m.a)(["\n    display: flex;\n    padding: 0 !important;\n    justify-content: space-between;\n    align-items: center;\n    svg{\n        font-size: 16pt;\n        color: #32d0ff;\n        &:hover{\n            cursor: pointer;\n        }\n    }\n    & > div {\n        position: relative;\n    }\n"]))),ge=S.a.div(be||(be=Object(m.a)(["\n    font-size: 18pt;\n    width: 90%;\n"]))),fe=Object(S.a)(l.b)(ue||(ue=Object(m.a)(["\n    display: block;\n    position: absolute;\n    width: 230px;\n    height: 51px;\n    z-index: 8;\n"])));var Oe,ve,we,Ce=function(e){var n=Object(c.useState)(!1),t=Object(h.a)(n,2),a=t[0],r=t[1],i=function(){r((function(e){return!e}))},o=Object(p.a)(ne,{update:function(){return e.refetch()},onCompleted:function(e){console.log(e)}}),s=Object(h.a)(o,2),l=s[0];return s[1].data,Object(O.jsxs)(pe,{children:[Object(O.jsx)("div",{children:Object(O.jsxs)(xe,{children:[Object(O.jsx)(fe,{to:"/messages/"+e.data.id}),Object(O.jsx)(ge,{children:e.data.name}),Object(O.jsxs)("div",{onClick:function(){return i()},children:[Object(O.jsx)(A.e,{}),Object(O.jsxs)(he,{color:"#32d0ff",size:"110px",visible:a,children:[Object(O.jsxs)("li",{onClick:function(){return e.dispalayChannelModal(e.data)},children:[Object(O.jsx)(A.d,{})," ",Object(O.jsx)("span",{children:"Edit"})]}),Object(O.jsx)(me,{to:"/members/"+e.data.id,children:Object(O.jsxs)("li",{onClick:function(){return e.dispalayChannelModal(e.data)},children:[Object(O.jsx)(X.a,{})," ",Object(O.jsx)("span",{children:"Membres"})]})}),Object(O.jsxs)("li",{onClick:function(){return n=e.data.id,void l({variables:{deleteChannelId:n}});var n},children:[Object(O.jsx)(A.c,{})," ",Object(O.jsx)("span",{children:"Delete"})]})]})]})]})}),Object(O.jsx)(je,{visible:a,clickAction:i})]})},ye=S.a.div(Oe||(Oe=Object(m.a)(["\n    display: ",";\n    position: fixed;\n    top: 50% ;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: white;\n    border-radius: 10px;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;\n    z-index: 9;\n    min-width: ",";\n"])),(function(e){return e.visible?"block":"none"}),(function(e){switch(e.size){case"sm":return"300px";case"md":return"400px";case"lg":return"520px";default:return"300px"}})),Me=S.a.div(ve||(ve=Object(m.a)(["\n    display: flex;\n    justify-items: center;\n    justify-content: space-between;\n    padding: 17px;\n    font-size: 16pt;\n    .CloseModale{\n        color: #4452a6;\n        vertical-align: bottom;\n        &:hover{\n            cursor: pointer;\n        }\n        svg{\n            vertical-align: middle;\n        }\n    }\n"]))),ke=S.a.form(we||(we=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding: 12px;\n    padding-top: 0;\n"])));var Ie,Se,Ne=function(e){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)(ye,{visible:e.visible,children:[Object(O.jsxs)(Me,{children:[Object(O.jsx)("div",{className:"ModalTitle",children:e.title?e.title:"Title of Modal"}),Object(O.jsx)("div",{className:"CloseModale",onClick:function(){return e.closeModal()},children:Object(O.jsx)(A.b,{})})]}),Object(O.jsx)(ke,{children:e.children})]}),Object(O.jsx)(je,{visible:e.visible,clickAction:e.closeModal,color:"#0100079e"})]})},$e=S.a.div(Ie||(Ie=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    padding: 5px;\n    label{\n        color: #32d0ff;\n        font-size: 0.9em;\n        padding: 3px;\n        font-style: italic;\n    }\n"]))),Fe=S.a.button(Se||(Se=Object(m.a)(["\n    width: 100%;\n    height: 25px;\n    background: #32d0ff;\n    border: 0;\n    color: white;\n    border-radius: 5px;\n    margin-top: 7px;\n    &:hover{\n        cursor: pointer;\n        background-color: #1ec4f5;\n    }\n"])));var ze=function(e){var n=Object(p.a)("add"===e.type?Z:ee,{ignoreResults:!1,update:function(){return e.refetch()},onCompleted:function(e){console.log(e)}}),t=Object(h.a)(n,1)[0];return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)($e,{children:[Object(O.jsx)("label",{htmlFor:"channelName-modal-input",children:"Nom du channel"}),Object(O.jsx)("input",{type:"text",value:e.formInput.channelName,id:"channelName-modal-input",name:"channelName",onChange:function(n){return e.handleInputChange(n)}})]}),Object(O.jsx)(Fe,{onClick:function(n){return function(n){n.preventDefault(),""!==e.formInput.channelName.replace(/\s/g,"")?("add"===e.type?t({variables:{createChannelName:e.formInput.channelName}}):(t({variables:{setChannelNameId:e.formInput.id,setChannelNameName:e.formInput.channelName}}),e.closeChannelModal()),e.resetForm()):alert("we can't add or set channel without the name")}(n)},children:"add"===e.type?"Ajouter":"Modifier"})]})};var Ee,Te,_e,De=function(){var e=Object(c.useState)(!1),n=Object(h.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(!1),o=Object(h.a)(r,2),s=o[0],l=o[1],d=Object(c.useState)({id:"",channelName:""}),b=Object(h.a)(d,2),u=b[0],j=b[1],p=C(),m=Object(D.a)(Y,{pollInterval:3e3}),x=m.loading,g=m.error,f=m.data,v=m.refetch;if(Object(c.useEffect)((function(){v(),console.log("the first rerender",p.user.id)}),[]),x)return"Loading...";if(g)return"Error! ".concat(g.message);var w=function(e){void 0!==e?(l(!0),null!==e&&j({id:e.id,channelName:e.name})):(a(!0),M(),console.log(u))},y=function(){l(!1),a(!1)},M=function(){j({id:"",channelName:""})},k=function(e){var n=e.target,t=n.name,a=n.value,r=Object(i.a)({},u);r[t]=a,console.log(r),j(r)};return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Ne,{title:"Ajouter channel",visible:t,closeModal:y,children:Object(O.jsx)(ze,{type:"add",formInput:u,handleInputChange:k,resetForm:M,refetch:v,closeChannelModal:y})}),Object(O.jsx)(Ne,{title:"Modifier channel",visible:s,closeModal:y,children:Object(O.jsx)(ze,{type:"set",formInput:u,handleInputChange:k,resetForm:M,refetch:v,closeChannelModal:y})}),Object(O.jsx)(W,{dispalayChannelModal:w,children:null!=f.channels?f.channels.map((function(e){return Object(O.jsx)(Ce,{data:e,dispalayChannelModal:w,refetch:v},e.id)})):""})]})},Ae=S.a.div(Ee||(Ee=Object(m.a)(["\n    align-items: center;\n    width: 320px;\n    background-color: #eceefd;\n    border-radius: 10px;\n    margin: 17px auto;\n"]))),Be=S.a.h1(Te||(Te=Object(m.a)(["\n    color: #4452a6;\n    text-align: center;\n    padding: 22px;\n"]))),Le=Object(S.a)(l.b)(_e||(_e=Object(m.a)(["\n    text-decoration: none;\n    & > div {\n        font-size: 16pt;\n        text-align: center;\n        padding: 17px 0;\n        width: 322px;\n    }\n"])));var Re,Ue,Pe,qe=function(){var e=C();return Object(O.jsx)(c.Fragment,{children:null==e.user?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Ae,{children:Object(O.jsx)(Be,{children:"Tcha-Tcher"})}),Object(O.jsx)(Le,{to:"/signin",children:Object(O.jsx)(Ae,{children:"Sign in "})}),Object(O.jsx)(Le,{to:"/register",children:Object(O.jsx)(Ae,{children:"Sign up "})})]}):Object(O.jsx)(De,{})})},Je=t(41),Qe=S.a.div(Re||(Re=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 320px;\n    background-color: #eceefd;\n    border-radius: 10px;\n    margin: 17px auto;\n"]))),Ge=S.a.div(Ue||(Ue=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 90%;\n\n    background-color: #eceefd;\n    svg {\n        color: #4452a6;\n        font-size: 16pt;\n        &:hover{\n            cursor: pointer;\n        }\n    }\n    div{\n        position: relative;\n    }\n"]))),He=S.a.div(Pe||(Pe=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    max-width: 280px;\n    height: 50px;\n    margin-bottom: 17px;\n    background-color: #d9defa;\n    border-radius: 10px;\n    color: #4452a6;\n    svg{\n        margin: 0 12px;\n        font-size: 16pt;\n    }\n    &:hover{\n        cursor: pointer;\n    }\n"])));var Ke,Ve=function(e){return Object(O.jsxs)(Qe,{children:[Object(O.jsxs)(Ge,{children:[e.homeBackLink?Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)(Je.a,{})]}):"",Object(O.jsxs)("h2",{children:["Members of ",e.colomunTitle]}),Object(O.jsx)("div",{onClick:function(){return e.dispalayMemberModal()},children:Object(O.jsx)(A.g,{})})]}),e.children,Object(O.jsxs)(He,{onClick:function(){return e.dispalayMemberModal()},children:[" ",Object(O.jsx)(A.g,{})," ",Object(O.jsx)("span",{children:"Add a member"})]})]})},We=t(58),Xe=S.a.div(Ke||(Ke=Object(m.a)(["\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: #4452a6;\n    font-size: 16pt;\n    font-weight: bolder;\n"])));var Ye,Ze,en,nn,tn=function(e){var n=e.word.charAt(0).toUpperCase();return Object(O.jsx)(Xe,{children:n})},an=S.a.div(Ye||(Ye=Object(m.a)(["\n    display: flex;\n    width: 275px;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 5px;\n    & > div{\n        padding: 10px;\n    display: flex;\n    align-items: center;\n    }\n    &:hover{\n        background-color: #4452ae1f;\n        border-radius: 5px;\n    }\n"]))),rn=S.a.div(Ze||(Ze=Object(m.a)(["\n    p{\n        margin: 0;\n        padding: 2px 17px;\n        font-size: 11pt;\n    }\n    p:firstChild{\n        font-weight: bolder;\n    }\n"]))),cn=S.a.div(en||(en=Object(m.a)(["\n    width: 240px;\n    height: 1px;\n    background-color: white;\n"]))),on=S.a.div(nn||(nn=Object(m.a)(["\n    color: #4452a6;\n    font-size: 14pt;\n    &:hover{\n        cursor: pointer;\n    }\n"])));var sn,ln,dn=function(e){var n=Object(p.a)(re),t=Object(h.a)(n,1)[0],a=C();return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)(an,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(tn,{word:e.data.name}),Object(O.jsxs)(rn,{children:[Object(O.jsx)("p",{children:e.data.name}),Object(O.jsx)("p",{children:e.data.email})]})]}),a.user.id!=e.data.id?Object(O.jsx)(on,{onClick:function(){return n=e.data.email,a=e.channelId,t({variables:{rmMemberFromChannelEmail:n,rmMemberFromChannelChannel:a}}),void e.refetch();var n,a},children:Object(O.jsx)(A.f,{})}):Object(O.jsx)(on,{children:Object(O.jsx)(We.a,{})})]}),Object(O.jsx)(cn,{})]})},bn=S.a.div(sn||(sn=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    padding: 5px;\n    label{\n        color: #32d0ff;\n        font-size: 0.9em;\n        padding: 3px;\n        font-style: italic;\n    }\n"]))),un=S.a.button(ln||(ln=Object(m.a)(["\n    width: 100%;\n    height: 25px;\n    background: #32d0ff;\n    border: 0;\n    color: white;\n    border-radius: 5px;\n    margin-top: 7px;\n    &:hover{\n        cursor: pointer;\n        background-color: #1ec4f5;\n    }\n"])));var jn=function(e){var n=Object(p.a)(ae,{update:function(){return e.refetch()},onCompleted:function(e){console.log(e)}}),t=Object(h.a)(n,1)[0];return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)(bn,{children:[Object(O.jsx)("label",{htmlFor:"memberEmail-modal-input",children:"Email du membre"}),Object(O.jsx)("input",{type:"text",value:e.formInput.memberEmail,id:"memberEmail-modal-input",name:"memberEmail",onChange:function(n){return e.handleInputChange(n)}})]}),Object(O.jsx)(un,{onClick:function(n){return function(n){n.preventDefault(),""!==e.formInput.memberEmail.replace(/\s/g,"")?(t({variables:{addMemberToChannelEmail:e.formInput.memberEmail,addMemberToChannelChannel:e.formInput.channelId}}),e.resetForm(),e.closeMemberModal()):alert("we can't add a member without the email")}(n)},children:"Ajouter"})]})};var hn,pn=function(){var e=Object(d.g)().id,n=Object(c.useState)(!1),t=Object(h.a)(n,2),a=t[0],r=t[1],o=Object(c.useState)({memberId:"",memberName:"",memberEmail:"",channelId:e}),s=Object(h.a)(o,2),l=s[0],b=s[1],u=Object(D.a)(te,{variables:{getMembersChannel:e}}),j=u.loading,p=u.error,m=u.data,x=u.refetch,g=Object(D.a)(ie,{variables:{getChaneByIdChannelId:e}});if(j||g.loading)return"Loading...";if(p||g.error)return"Error! ".concat(p.message);var f=function(){r(!1),v()},v=function(){var e=Object(i.a)({},l);e.memberEmail="",b(e)};return Object(O.jsx)("div",{children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Ne,{title:"Ajouter membre",visible:a,closeModal:f,children:Object(O.jsx)(jn,{type:"add",formInput:l,handleInputChange:function(e){var n=e.target,t=n.name,a=n.value,r=Object(i.a)({},l);r[t]=a,console.log(r),b(r)},resetForm:v,refetch:x,closeMemberModal:f})}),Object(O.jsx)(Ve,{homeBackLink:!0,colomunTitle:g.data.channel.name,dispalayMemberModal:function(){r(!0)},children:null!=m.members?m.members.map((function(n){return Object(O.jsx)(dn,{data:n,refetch:x,channelId:e},n.id)})):""})]})})},mn=S.a.p(hn||(hn=Object(m.a)(["\n    width: 100%;\n    background-color: #ff000091;\n    color: white;\n    text-align: center;\n    padding: 22px;\n"])));var xn,gn,fn=function(e){return Object(O.jsx)(mn,{children:e.message})},On=S.a.form(xn||(xn=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    max-width: 520px;\n    margin: 0 auto;\n    padding: 22px;\n    width: 220px;\n    background: #eceefd;\n    border-bottom: 5px ##4452a6 solid;\n    div{\n        display: flex;\n        flex-direction: column;\n        width: 210px;\n        padding: 5px;\n        label{\n            margin: 5px;\n            color: #4452a6;\n        }\n    }\n    input {\n        padding: 5px;\n        border: 1px lightgray solid;\n    }\n    button{\n        padding: 5px;\n        margin-top: 14px;\n        width: 210px;\n        border: 1px lightgray solid;\n        background-color: white;\n        color: #4452a6;\n        cursor: pointer;\n        transition: .3ms;\n        \n        border-radius: 7px;\n        &:hover{\n            background-color: #4452a6;\n            color: white;\n            transition: .3ms;\n        }\n    }\n    \n"]))),vn=S.a.h1(gn||(gn=Object(m.a)(["\n    text-align: center;\n    color: #4452a6;\n    width: 220px;\n    margin: 12px auto;\n    padding: 22px;\n    background: #eceefd;\n    border-bottom: 5px #4452a6 solid;\n"])));var wn=function(){var e=C(),n=Object(c.useState)({userName:"",email:"",password:"",passwordCheck:""}),t=Object(h.a)(n,2),a=t[0],r=t[1],o=Object(c.useState)({display:!1,msg:""}),s=Object(h.a)(o,2),l=s[0],b=s[1],p=function(e){var n=e.target,t=Object(i.a)({},a);t[n.name]=n.value,r(t)},m=function(){var n=Object(j.a)(u.a.mark((function n(t){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),""!=a.userName.trim()&&""!=a.password.trim()&&""!=a.email.trim()&&""!=a.passwordCheck.trim()){n.next=6;break}return b({display:!0,msg:"Informations Manquantes"}),n.abrupt("return");case 6:if(a.password==a.passwordCheck){n.next=9;break}return b({display:!0,msg:"Mot de passe Incorrecte"}),n.abrupt("return");case 9:if(null!=e.user){n.next=14;break}return n.next=12,e.register(a);case 12:(r=n.sent).status>=400&&b({display:!0,msg:r.msg});case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[null!=e.user?Object(O.jsx)(d.a,{to:"/"}):"",Object(O.jsx)(vn,{children:"Register"}),Object(O.jsxs)(On,{children:[l.display?Object(O.jsx)(fn,{message:l.msg}):"",Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"user-name",children:" User Name"}),Object(O.jsx)("input",{type:"text",id:"user-name",name:"userName",onChange:function(e){return p(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email "}),Object(O.jsx)("input",{type:"text",id:"email",name:"email",onChange:function(e){return p(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password "}),Object(O.jsx)("input",{type:"password",id:"password",name:"password",onChange:function(e){return p(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password-check",children:"Retype the password for check"}),Object(O.jsx)("input",{type:"password",id:"password-check",name:"passwordCheck",onChange:function(e){return p(e)}})]}),Object(O.jsx)("button",{onClick:function(e){return m(e)},children:"Sign Up"})]})]})};var Cn,yn,Mn,kn,In=function(){var e=Object(c.useState)({email:"",password:""}),n=Object(h.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)({display:!1,msg:""}),o=Object(h.a)(r,2),s=o[0],l=o[1],b=C(),p=function(){var e=Object(j.a)(u.a.mark((function e(n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null!=b.user){e.next=7;break}return console.log(t),e.next=5,b.login(t.email,t.password);case 5:(a=e.sent).status>400&&(r={display:!0,msg:a.msg},l(r));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(e){var n=e.target,r=Object(i.a)({},t);r[n.name]=n.value,a(r)};return Object(O.jsxs)("div",{children:[Object(O.jsx)(vn,{children:"Sign in"}),Object(O.jsxs)(On,{children:[null!=b.user?Object(O.jsx)(d.a,{to:"/"}):"",s.display?Object(O.jsx)(fn,{message:s.msg}):"",Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email "}),Object(O.jsx)("input",{id:"email",name:"email",value:t.email,onChange:function(e){return m(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password "}),Object(O.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:function(e){return m(e)}})]}),Object(O.jsx)("button",{onClick:function(e){return p(e)},children:"Login"})]})]})},Sn=S.a.div(Cn||(Cn=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 320px;\n    background-color: #eceefd;\n    border-radius: 10px;\n    margin: 17px auto;\n\n"]))),Nn=S.a.div(yn||(yn=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 90%;\n\n    background-color: #eceefd;\n    svg {\n        color: #4452a6;\n        font-size: 16pt;\n        &:hover{\n            cursor: pointer;\n        }\n    }\n    div{\n        position: relative;\n    }\n"]))),$n=(S.a.div(Mn||(Mn=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    max-width: 280px;\n    height: 50px;\n    margin-bottom: 17px;\n    background-color: #d9defa;\n    border-radius: 10px;\n    color: #4452a6;\n    svg{\n        margin: 0 12px;\n        font-size: 16pt;\n    }\n    &:hover{\n        cursor: pointer;\n    }\n"]))),S.a.div(kn||(kn=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 320px;\n    border-radius: 10px;\n    margin: 17px auto;\n"]))));var Fn,zn,En,Tn=function(e){return Object(O.jsxs)(Sn,{children:[Object(O.jsxs)(Nn,{children:[e.homeBackLink?Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)(Je.a,{})]}):"",Object(O.jsxs)("h2",{children:["Channel ",e.columnTitle]}),Object(O.jsx)("div",{onClick:function(){return e.dispalayMemberModal()},children:Object(O.jsx)(A.g,{})})]}),Object(O.jsx)("p",{children:"Messages"}),Object(O.jsx)($n,{children:e.children})]})},_n=S.a.form(Fn||(Fn=Object(m.a)(["\n    display: flex;\n    position: sticky;\n    bottom: 0;\n    background: #eceefd;\n    width: 287px;\n    justify-content: space-between;\n    padding: 10px;\n"]))),Dn=S.a.textarea(zn||(zn=Object(m.a)(["\n    resize: none;\n    width: 220px;\n    height: 50px;\n    background: #eceefd;\n    border-color: #4452a6;\n    color: #4452a6;\n    bottom: 0;\n    background: #eceefd;\n    width: 287px;\n    justify-content: space-between;\n    padding: 10px;\n    border-radius: 7px 0 0 7px;\n"]))),An=S.a.button(En||(En=Object(m.a)(["\n    background: #4452a6;\n    border: none;\n    color: white;\n    border-radius: 0 7px 7px 0;\n"])));var Bn,Ln,Rn,Un,Pn,qn,Jn,Qn=function(e){var n=Object(c.useState)(""),t=Object(h.a)(n,2),a=t[0],r=t[1];return Object(O.jsxs)(_n,{children:[Object(O.jsx)(Dn,{value:a,name:"message",onChange:function(e){return function(e){var n=e.target;r(n.value),console.log(n.value)}(e)}}),Object(O.jsx)(An,{onClick:function(n){return function(n){n.preventDefault(),e.send(a),r(""),e.refetch()}(n)},children:"Send"})]})},Gn=t(59),Hn=Object(x.a)(Bn||(Bn=Object(m.a)(["\nquery Query($getMessageChannel: ID!) {\n    messages: getMessage(channel: $getMessageChannel) {\n        message {\n            user\n            id\n            channel\n            text\n        }\n        user {\n            id\n            name\n            email\n        }\n        __typename\n    }\n}\n"]))),Kn=Object(x.a)(Ln||(Ln=Object(m.a)(["\n    mutation AddMessageMutation($addMessageChannel: ID!, $addMessageText: String!) {\n        addMessage(channel: $addMessageChannel, text: $addMessageText) {\n            id\n            channel\n            user\n            text\n            __typename\n        }\n    }\n"]))),Vn=Object(x.a)(Rn||(Rn=Object(m.a)(["\n    mutation SetMessageMutation($setMessageMsgId: ID!, $setMessageText: String!) {\n        setMessage(msgId: $setMessageMsgId, text: $setMessageText) {\n            id\n            channel\n            text\n            user\n            __typename\n        }\n    }\n"]))),Wn=Object(x.a)(Un||(Un=Object(m.a)(["\n    mutation RmMessageMutation($rmMessageMsgId: ID!) {\n        rmMessage(msgId: $rmMessageMsgId) {\n            id\n            channel\n            text\n            user\n            __typename\n        }\n    }\n"]))),Xn=S.a.div(Pn||(Pn=Object(m.a)(["\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    width: 220px;\n    margin: 7px 20px;\n    border-radius: 12px;\n    &.owner{\n        background-color: white;\n        align-self: flex-start;\n        color: #4452a6;\n    }\n    &.other{\n        background-color: #4452a6;\n        align-self:flex-end;\n        color: white;\n    }\n    i{\n        font-size: 10pt;\n        display: block;\n        padding-left: 5px;\n    }\n"]))),Yn=S.a.p(qn||(qn=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-weight: bold;\n    font-size: 10pt;\n    padding: 5px;\n    margin: 0;\n    &.other{\n        color: white;\n    }\n\n"]))),Zn=S.a.p(Jn||(Jn=Object(m.a)(["\n    &.other{\n        color: white;\n    }\n    &.owner{\n        color: #4452a6;\n    }\n    padding: 7px;\n    margin: 0;\n"])));var et,nt,tt=function(e){var n=C(),t=Object(c.useState)(!1),a=Object(h.a)(t,2),r=a[0],i=a[1],o=function(){i((function(e){return!e}))},s=Object(p.a)(Wn,{update:function(){return e.refetch()}}),l=Object(h.a)(s,1)[0];return Object(O.jsxs)(Xn,{className:n.user.id==e.data.user.id?"owner":"other",children:[Object(O.jsxs)(Yn,{children:[e.data.user.name,n.user.id==e.data.user.id?Object(O.jsxs)("div",{onClick:function(){return o()},children:[Object(O.jsx)(Gn.a,{}),Object(O.jsxs)(he,{color:"#4452a6",size:"110px",visible:r,children:[Object(O.jsxs)("li",{onClick:function(){return e.showModal({id:e.data.message.id,message:e.data.message.text})},children:[Object(O.jsx)(A.d,{})," ",Object(O.jsx)("span",{children:"Edit"})]}),Object(O.jsxs)("li",{onClick:function(){return l({variables:{rmMessageMsgId:e.data.message.id}})},children:[Object(O.jsx)(A.c,{})," ",Object(O.jsx)("span",{children:"Delete"})]})]})]}):""]}),Object(O.jsx)("i",{children:e.data.user.email}),Object(O.jsx)(Zn,{children:e.data.message.text}),Object(O.jsx)(je,{visible:r,clickAction:o})]})},at=S.a.div(et||(et=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    padding: 5px;\n    label{\n        color: #32d0ff;\n        font-size: 0.9em;\n        padding: 3px;\n        font-style: italic;\n    }\n"]))),rt=S.a.button(nt||(nt=Object(m.a)(["\n    width: 100%;\n    height: 25px;\n    background: #32d0ff;\n    border: 0;\n    color: white;\n    border-radius: 5px;\n    margin-top: 7px;\n    &:hover{\n        cursor: pointer;\n        background-color: #1ec4f5;\n    }\n"])));var it=function(e){var n=Object(p.a)(Vn,{ignoreResults:!1,update:function(){return e.refetch()},onCompleted:function(e){console.log(e)}}),t=Object(h.a)(n,1)[0];return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)(at,{children:[Object(O.jsx)("label",{htmlFor:"message-modal-input",children:"Nom du channel"}),Object(O.jsx)("input",{type:"text",value:e.formInput.message,id:"message-modal-input",name:"message",onChange:function(n){return e.handleInputChange(n)}})]}),Object(O.jsx)(rt,{onClick:function(n){return function(n){n.preventDefault(),""!==e.formInput.message.replace(/\s/g,"")&&(t({variables:{setMessageMsgId:e.formInput.id,setMessageText:e.formInput.message}}),e.close())}(n)},children:"Modifier"})]})};var ct=function(){var e=C(),n=Object(d.g)().id,t=Object(c.useState)(!1),a=Object(h.a)(t,2),r=a[0],o=a[1],s=Object(c.useState)({id:"",message:""}),l=Object(h.a)(s,2),b=l[0],u=l[1],j=function(e){u({id:e.id,message:e.message}),o(!0)},m=function(){o(!1)},x=Object(p.a)(Kn),g=Object(h.a)(x,1)[0],f=Object(c.useState)(!1),v=Object(h.a)(f,2),w=v[0],y=v[1],M=Object(c.useState)({memberId:"",memberName:"",memberEmail:"",channelId:n}),k=Object(h.a)(M,2),I=k[0],S=k[1],N=function(){y(!1),$()},$=function(){var e=Object(i.a)({},I);e.memberEmail="",S(e)},F=Object(D.a)(Hn,{variables:{getMessageChannel:n},pollInterval:3e3}),z=F.loading,E=F.error,T=F.data,_=F.refetch,A=Object(D.a)(ie,{variables:{getChaneByIdChannelId:n}});return z||A.loading?Object(O.jsx)("div",{children:"Loding ..."}):E||A.error?E:Object(O.jsx)(c.Fragment,{children:null==e.user?Object(O.jsx)(d.a,{to:"/"}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Ne,{visible:r,title:"Modifier Message",closeModal:m,children:Object(O.jsx)(it,{formInput:b,handleInputChange:function(e){var n=e.target,t=n.name,a=n.value,r=Object(i.a)({},b);r[t]=a,console.log(r),u(r)},refetch:_,close:m})}),Object(O.jsx)(Ne,{title:"Ajouter membre",visible:w,closeModal:N,children:Object(O.jsx)(jn,{type:"add",formInput:I,handleInputChange:function(e){var n=e.target,t=n.name,a=n.value,r=Object(i.a)({},I);r[t]=a,console.log(r),S(r)},resetForm:$,refetch:_,closeMemberModal:N})}),Object(O.jsxs)(Tn,{homeBackLink:!0,columnTitle:A.data.channel.name,dispalayMemberModal:function(){y(!0)},children:[T.messages.map((function(e){return Object(O.jsx)(tt,{data:e,showModal:j,refetch:_},e.message.id)})),Object(O.jsx)(Qn,{refetch:_,send:function(e){g({variables:{addMessageChannel:n,addMessageText:e}})}})]})]})})};var ot=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(w,{children:[Object(O.jsx)(_,{}),Object(O.jsx)(l.a,{children:Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/",children:Object(O.jsx)(qe,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/signin",children:Object(O.jsx)(In,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/register",children:Object(O.jsx)(wn,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/members/:id",children:Object(O.jsx)(pn,{})}),Object(O.jsx)(d.b,{exact:!0,path:"/messages/:id",children:Object(O.jsx)(ct,{})})]})})]})})},st=t(61),lt=t(90),dt=t(91),bt=t(88),ut=t(60),jt=Object(st.a)({uri:"https://tchat-tcher.herokuapp.com/"}),ht=Object(ut.a)((function(e,n){var t=n.headers,a=localStorage.getItem("token");return{headers:Object(i.a)(Object(i.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),pt=new lt.a({cache:new dt.a,link:ht.concat(jt)});s.a.render(Object(O.jsx)(bt.a,{client:pt,children:Object(O.jsx)(ot,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.f8f489b1.chunk.js.map